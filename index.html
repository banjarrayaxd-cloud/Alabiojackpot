<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mahjong Style Slot Premium</title>
<style>
body{
  margin:0;
  background:radial-gradient(circle at top,#1e3c72,#0f2027);
  font-family:Arial;
  color:white;
  text-align:center;
}

h1{margin:10px;}

.topbar{
  display:flex;
  justify-content:space-around;
  padding:10px;
  font-size:18px;
}

.grid{
  display:grid;
  grid-template-columns:repeat(5,75px);
  grid-template-rows:repeat(4,75px);
  gap:6px;
  justify-content:center;
  margin:20px auto;
}

.cell{
  background:linear-gradient(gold,#c9a300);
  color:black;
  font-size:26px;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:12px;
  transition:0.3s;
}

.win{
  background:lime;
  transform:scale(1.15);
}

.scatter{
  background:orange !important;
}

.controls{
  margin:15px;
}

button{
  padding:10px 20px;
  font-size:16px;
  border:none;
  border-radius:6px;
  margin:5px;
  cursor:pointer;
}

.spin{
  background:red;
  color:white;
  font-size:20px;
}

.message{
  font-size:22px;
  margin-top:10px;
  height:30px;
  font-weight:bold;
  color:gold;
}
</style>
</head>
<body>

<h1>ðŸŽ° Mahjong Style Slot Premium (Demo)</h1>

<div class="topbar">
  <div>Saldo: <span id="balance">1000</span></div>
  <div>Bet: <span id="bet">10</span></div>
  <div>Multiplier: x<span id="multi">1</span></div>
  <div>FreeSpin: <span id="freespin">0</span></div>
</div>

<div class="grid" id="grid"></div>

<div class="controls">
  <button onclick="changeBet(-10)">- Bet</button>
  <button onclick="changeBet(10)">+ Bet</button>
  <button class="spin" onclick="spin()">SPIN</button>
</div>

<div class="message" id="message"></div>

<script>
const symbols=["ðŸ€„","ðŸ€…","ðŸ€†","ðŸ€‡","ðŸ€ˆ","ðŸ€‰"];
const scatterSymbol="ðŸ’Ž";

const gridEl=document.getElementById("grid");
let balance=1000;
let bet=10;
let multiplier=1;
let freeSpin=0;

function updateUI(){
  balanceEl.innerText=balance;
  betEl.innerText=bet;
  multiEl.innerText=multiplier;
  freeEl.innerText=freeSpin;
}

const balanceEl=document.getElementById("balance");
const betEl=document.getElementById("bet");
const multiEl=document.getElementById("multi");
const freeEl=document.getElementById("freespin");
const messageEl=document.getElementById("message");

function randomSymbol(){
  if(Math.random()<0.1) return scatterSymbol;
  return symbols[Math.floor(Math.random()*symbols.length)];
}

function createGrid(){
  gridEl.innerHTML="";
  for(let i=0;i<20;i++){
    const div=document.createElement("div");
    div.classList.add("cell");
    div.innerText=randomSymbol();
    gridEl.appendChild(div);
  }
}

function spin(){
  if(balance<bet && freeSpin==0){
    alert("Saldo habis!");
    return;
  }

  if(freeSpin>0){
    freeSpin--;
  } else {
    balance-=bet;
  }

  multiplier=1;
  messageEl.innerText="";
  createGrid();
  setTimeout(checkResult,400);
  updateUI();
}

function checkResult(){
  const cells=document.querySelectorAll(".cell");
  let map={};
  let scatterCount=0;

  cells.forEach(cell=>{
    map[cell.innerText]=(map[cell.innerText]||0)+1;
    if(cell.innerText==scatterSymbol){
      cell.classList.add("scatter");
      scatterCount++;
    }
  });

  if(scatterCount>=3){
    freeSpin+=5;
    messageEl.innerText="ðŸŽ FREE SPIN +5!";
  }

  let win=false;
  for(let key in map){
    if(key!=scatterSymbol && map[key]>=4){
      win=true;
      cells.forEach(cell=>{
        if(cell.innerText==key){
          cell.classList.add("win");
        }
      });
      let winAmount=bet*multiplier*(map[key]/4);
      balance+=Math.floor(winAmount);
      multiplier++;
      messageEl.innerText="âœ¨ WIN x"+multiplier;
    }
  }

  updateUI();

  if(win){
    setTimeout(cascade,500);
  }
}

function cascade(){
  const cells=document.querySelectorAll(".cell");
  cells.forEach(cell=>{
    if(cell.classList.contains("win")){
      cell.classList.remove("win");
      cell.innerText=randomSymbol();
    }
  });
  setTimeout(checkResult,400);
}

function changeBet(val){
  bet+=val;
  if(bet<10) bet=10;
  updateUI();
}

createGrid();
updateUI();
</script>

</body>
</html>
