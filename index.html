<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ALABIO Pangkalan Sari Slot + Live Chat</title>
<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:radial-gradient(circle,#0f2027,#203a43,#2c5364);
  color:white;
  text-align:center;
  overflow-x:hidden;
}
.box{
  max-width:500px;
  margin:30px auto;
  background:#2b0000;
  padding:20px;
  border-radius:12px;
}
.form-group{ margin-bottom:12px; text-align:left; }
.form-group label{ display:block; margin-bottom:5px; font-size:14px; }
.form-group input, .form-group select{ width:100%; padding:10px; border:none; border-radius:8px; }

h1{margin:10px;color:gold;text-shadow:0 0 15px gold;}
button{cursor:pointer;}

/* GAME BOX */
#gameBox{display:none; max-width:1000px; margin:0 auto;}
.topbar{display:flex;justify-content:space-around;font-size:14px;padding:8px;}
.slot{display:flex;justify-content:center;margin:20px auto;}
.reel{width:70px;height:280px;overflow:hidden;border:2px solid gold;border-radius:10px;margin:0 5px;background:#111;position:relative;}
.reel-inner{position:absolute;width:100%;}
.symbol{height:70px;display:flex;align-items:center;justify-content:center;font-size:26px;background:linear-gradient(#ffd700,#b8860b);color:black;border-bottom:1px solid #333;}
.controls button{padding:8px 15px;margin:5px;border:none;border-radius:8px;transition:0.1s;}
.controls button.bet.selected{background:orange; transform:scale(1.1);}
.spin{background:red;color:white;font-size:18px;transition:0.1s;}
.spin:active{transform:scale(0.95);box-shadow:0 0 10px gold inset;}
.bigwin{position:fixed;top:40%;left:50%;transform:translate(-50%,-50%);font-size:45px;font-weight:bold;color:gold;display:none;text-shadow:0 0 20px gold;}
.bonus-mode{background: linear-gradient(45deg, gold, orange);}
#logoutBtn{padding:5px 12px;margin-top:5px;border:none;border-radius:5px;background:#ff3333;color:white;cursor:pointer;}
#history{max-height:150px;overflow-y:auto;margin-top:15px;background:rgba(255,255,255,0.1);padding:10px;border-radius:8px;text-align:left;}

/* CHAT */
#chatContainer{margin-top:20px;text-align:left;background:rgba(0,0,0,0.2);border-radius:10px;padding:10px;max-height:400px;overflow-y:auto;}
.chat-bubble{padding:8px 12px;margin:5px 10px;border-radius:15px;display:inline-block;max-width:75%;position:relative;}
.chat-other{background:#ddd;color:black; border-bottom-left-radius:0;}
.chat-me{background:gold;color:black; border-bottom-right-radius:0; margin-left:auto;}
.chat-time{font-size:10px; color:#333; margin-top:2px;}
#chatInputContainer{display:flex;margin-top:5px;}
#chatInputContainer input{flex:1;padding:8px;border-radius:20px;border:none;}
#chatInputContainer button{padding:8px 15px;margin-left:5px;border:none;border-radius:20px;background:#ff6600;color:white;cursor:pointer;}
/* ===== SIDEBAR ===== */
.sidebar{
  position:fixed;
  top:0;
  left:-270px;
  width:260px;
  height:100%;
  background:linear-gradient(180deg,#111,#000);
  transition:0.4s ease;
  z-index:3000;
  box-shadow:4px 0 15px rgba(0,0,0,0.8);
  overflow-y:auto;
}
.sidebar.active{left:0;}
.sidebar-header{
  background:linear-gradient(90deg,gold,#ffcc00);
  color:black;
  padding:15px;
  font-weight:bold;
  display:flex;
  justify-content:space-between;
  align-items:center;
  cursor:pointer;
}
.chat-badge{
  background:red;
  color:white;
  font-size:12px;
  padding:2px 6px;
  border-radius:10px;
}
.menu-list a{
  display:block;
  padding:14px 18px;
  color:white;
  text-decoration:none;
  border-bottom:1px solid #222;
  transition:0.3s;
}
.menu-list a:hover{
  background:gold;
  color:black;
  padding-left:25px;
}
</style>
</head>
<body>

<!-- SIDEBAR -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-header" onclick="toggleChat()">
    <div>üí¨ Live Chat</div>
    <div>
      <span class="chat-badge" id="chatBadge">0</span>
    </div>
  </div>
  <div class="menu-list">
    <a href="#">üìú History</a>
    <a href="#" onclick="showDeposit()">üí∞ Deposit</a>
    <a href="#" onclick="showWithdraw()">üèß Withdraw</a>
    <a href="#">üéÅ Bonus</a>
    <a href="#">üéâ Promosi</a>
    <a href="#" onclick="logoutUser()">üö™ Logout</a>
  </div>
</div>

<!-- LOGIN BOX -->
<div id="loginBox" class="box">
  <h1>Login</h1>
  <input type="email" id="loginEmail" placeholder="Email">
  <input type="password" id="loginPass" placeholder="Password">
  <br><br>
  <button onclick="loginUser()">Login</button>
</div>

<!-- DEPOSIT BOX -->
<div id="depositBox" class="box" style="display:none;">
  <h2>üí∞ Deposit</h2>
  <input type="number" id="depositAmount" placeholder="Masukkan jumlah">
  <input type="text" id="depositRek" value="1234567890" readonly>
  <small>Rekening tujuan: Rek bos</small>
  <br><br>
  <button onclick="submitDeposit()">Kirim Deposit</button>
</div>

<!-- WITHDRAW BOX -->
<div id="withdrawBox" class="box" style="display:none;">
  <h2>üèß Withdraw</h2>
  <input type="number" id="withdrawAmount" placeholder="Masukkan jumlah">
  <input type="text" id="withdrawRek" placeholder="Masukkan nomor rekening Anda">
  <br><br>
  <button onclick="submitWithdraw()">Kirim Withdraw</button>
</div>

<!-- GAME BOX -->
<div id="gameBox">
  <div class="topbar">
    <div>Balance: <span id="balanceEl">0</span></div>
    <div>Bet: <span id="betEl">1000</span></div>
  </div>
  <div class="slot" id="slot"></div>
  <div class="controls">
    <button class="spin" onclick="spin()">SPIN</button>
  </div>
  <div id="history"></div>

  <!-- CHAT -->
  <div id="chatContainer"></div>
  <div id="chatInputContainer">
    <input type="text" id="chatInput" placeholder="Ketik pesan...">
    <button onclick="sendMessage()">Kirim</button>
  </div>
</div>

<div class="bigwin" id="bigwinEl">BIG WIN!</div>

<script>
// ===== FIREBASE INIT (isi sesuai proyek Anda) =====
// const firebaseConfig = {...};
// firebase.initializeApp(firebaseConfig);
// const auth = firebase.auth();
// const db = firebase.firestore();

// ===== GLOBAL VAR =====
let balance = 0;
let bet = 1000;
let freeSpins = 0;
let bonusMode = false;
let symbols = ["üçí","üçã","üçâ","üíé","‚≠ê"];
const balanceEl = document.getElementById("balanceEl");
const betEl = document.getElementById("betEl");
const slot = document.getElementById("slot");
const historyDiv = document.getElementById("history");
const chatContainer = document.getElementById("chatContainer");
const chatInput = document.getElementById("chatInput");

// ===== AUTH & USER =====
function loginUser(){ /* isi login sesuai firebase */ }
function logoutUser(){ /* isi logout */ }

// ===== DEPOSIT & WITHDRAW =====
function showDeposit(){ document.getElementById("depositBox").style.display="block"; document.getElementById("withdrawBox").style.display="none"; closeMenu(); }
function showWithdraw(){ document.getElementById("withdrawBox").style.display="block"; document.getElementById("depositBox").style.display="none"; closeMenu(); }

function submitDeposit(){
  const amount = parseInt(document.getElementById("depositAmount").value);
  const rek = document.getElementById("depositRek").value;
  if(!amount || amount<=0) return alert("Masukkan jumlah valid!");
  const user = auth.currentUser;
  if(!user) return alert("Login dulu!");
  const userRef = db.collection("users").doc(user.uid);
  userRef.get().then(doc=>{
    let currentBalance = doc.data().balance || 0;
    let newBalance = currentBalance + amount;
    userRef.update({balance:newBalance}).then(()=>{
      balance = newBalance;
      updateUI();
      alert(`Deposit berhasil ‚úÖ\nJumlah: ${amount}\nRekening Tujuan: ${rek}`);
      document.getElementById("depositBox").style.display="none";
      document.getElementById("depositAmount").value="";
    });
  });
}

function submitWithdraw(){
  const amount = parseInt(document.getElementById("withdrawAmount").value);
  const rek = document.getElementById("withdrawRek").value.trim();
  if(!amount || amount<=0) return alert("Masukkan jumlah valid!");
  if(!rek) return alert("Masukkan nomor rekening Anda!");
  const user = auth.currentUser;
  if(!user) return alert("Login dulu!");
  const userRef = db.collection("users").doc(user.uid);
  userRef.get().then(doc=>{
    let currentBalance = doc.data().balance || 0;
    if(amount>currentBalance){ alert("Saldo tidak cukup!"); return; }
    let newBalance = currentBalance - amount;
    userRef.update({balance:newBalance}).then(()=>{
      balance = newBalance;
      updateUI();
      alert(`Withdraw berhasil ‚úÖ\nJumlah: ${amount}\nRekening Anda: ${rek}`);
      document.getElementById("withdrawBox").style.display="none";
      document.getElementById("withdrawAmount").value="";
      document.getElementById("withdrawRek").value="";
    });
  });
}

// ===== UI & CHAT =====
function updateUI(){ balanceEl.innerText="Rp "+balance.toLocaleString("id-ID"); betEl.innerText="Rp "+bet.toLocaleString("id-ID"); }
function openMenu(){ document.getElementById("sidebar").classList.add("active"); }
function closeMenu(){ document.getElementById("sidebar").classList.remove("active"); }
function toggleChat(){ document.getElementById("chatContainer").scrollIntoView({behavior:"smooth"}); closeMenu(); }
function sendMessage(){ const msg=chatInput.value.trim(); if(!msg) return; const user=auth.currentUser; if(!user) return alert("Login dulu untuk chat!"); db.collection("chat").add({user:user.email,message:msg,timestamp:Date.now()}).then(()=>chatInput.value=""); }
</script>
</body>
</html>
